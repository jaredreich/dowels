var dowels=function(){function e(e){"undefined"!=typeof e&&("undefined"!=typeof e.root&&e.root&&(h=e.root),"undefined"!=typeof e.containerId&&e.containerId&&(c=e.containerId),"undefined"!=typeof e.titleBase&&e.titleBase&&(m=e.titleBase),"undefined"!=typeof e.apiBase&&e.apiBase&&(y=e.apiBase))}function t(e,t){var n={},o=[],i="";if(e instanceof RegExp)i=e.toString().slice(0,-1),i+="(?:/(?=$))?$";else{if("string"!=typeof e)throw"invalid path type, must be regex or string";i="^";for(var r=e.substring(1).split("/"),a=0;a<r.length;a++){var p=r[a];":"===p.charAt(0)?(i+="/([^\\/]+?)",n[p.substring(1)]="",o.push(r.indexOf(p))):i+="*"===p?"/(.*)":"/"+p}i+="(?:/(?=$))?$"}s.push({regex:i,handler:t,parameters:n,parameterLocations:o})}function n(){r(a(),!0)}function o(e){r(e,!0)}function i(e){u.path===e?(window.history.back(),document.title=m+u.path):r(e)}function r(e,t){u.path=a(),u.title=document.title;var n=m+e;t="undefined"==typeof t?!1:t,document.getElementById(c).innerHTML="",""===e&&(e="/");for(var o=0;o<s.length;o++){var i=s[o],r=new RegExp(i.regex,"i");if(r.test(e)){for(var p=e.substring(1).split("/"),l=[],d=0;d<i.parameterLocations.length;d++){var f=i.parameterLocations[d];l.push(p.slice(f,f+1).toString())}var y=0;for(var w in i.parameters)i.parameters.hasOwnProperty(w)&&(i.parameters[w]=l[y],y++);if(t===!0)"/"===e?window.history.replaceState(null,null,h):"/"===h?window.history.replaceState(null,null,e):window.history.replaceState(null,null,h+e);else{if(e===a())return;"/"===e?window.history.pushState(null,null,h):"/"===h?window.history.pushState(null,null,e):window.history.pushState(null,null,h+e)}return document.title=n,void i.handler.apply(null,[i.parameters])}}throw'"'+e+'" does not match a route.'}function a(){return"/"!==h?window.location.pathname.replace(h,""):window.location.pathname}function p(e,t){var n=document.getElementById(e);templateHTML=null!=n?n.innerHTML:"<div>template does not exist</div>",t="undefined"!=typeof t&&t?t:{};var o=f[templateHTML];if(!o){var i="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+templateHTML.replace(/[\r\t\n]/g,"").replace(/'(?=[^#]*#>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<#=(.+?)#>/g,"',$1,'").split("<#").join("');").split("#>").join("p.push('")+"');}return p.join('');";o=new Function("obj",i),f[templateHTML]=o}document.getElementById(c).innerHTML=o(t)}function l(e,t){var n="",o="",i={},r=["Content-type: application/json"];if("undefined"!=typeof e.method&&e.method){e.method=e.method.toString().toUpperCase();var a=["GET","POST","PUT","DELETE"];if(-1===a.indexOf(e.method))throw'dowels.request "method" must be "get", "post", "put", or "delete"';n=e.method}else n="GET";if("undefined"!=typeof e.endpoint&&e.endpoint&&e.endpoint.length>0)o=y+e.endpoint.toString();else{if(!("undefined"!=typeof e.endpointFull&&e.endpointFull&&e.endpointFull.length>0))throw'dowels.request must have either "endpoint" or "endpointFull" specified in options';o=e.endpointFull.toString()}"undefined"!=typeof e.body&&e.body&&(i=JSON.stringify(e.body)),"undefined"!=typeof e.headers&&e.headers&&(r=e.headers);var p=new XMLHttpRequest;p.open(n,o,!0);for(var l=0;l<r.length;l++){var d=r[l],s=d.split(": ")[0],u=d.split(": ")[1];p.setRequestHeader(s,u)}p.onreadystatechange=function(){4==p.readyState&&200==p.status&&t&&t(JSON.parse(p.responseText))},p.send(i)}function d(e,t){l(t,function(t){var n={res:t};p(e,n)})}var s=[],u={path:"",title:""},f={},h="/",c="app",m="Example App: ",y="https://example.com/api";return window.addEventListener("popstate",function(e){a()===u.path?r(u.path,!0):r(a(),!0)}),{config:e,add:t,initialize:n,nav:r,back:i,redirect:o,render:p,request:l,renderAfterRequest:d}}();"object"==typeof module&&module.exports&&(module.exports=dowels);